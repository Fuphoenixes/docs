(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{368:function(t,a,e){"use strict";e.r(a);var s=e(42),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"美气多"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#美气多"}},[t._v("#")]),t._v(" 美气多")]),t._v(" "),e("h2",{attrs:{id:"介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),e("h3",{attrs:{id:"背景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),e("p",[e("a",{attrs:{href:t.$withBase("/美气多说明书.ppt")}},[t._v("美气多说明书.ppt")])]),t._v(" "),e("p",[t._v("美气多是一款基于微信公众号和支付宝小程序的在线开户订气平台。")]),t._v(" "),e("p",[t._v("用户端：")]),t._v(" "),e("p",[t._v("​\t使用 "),e("a",{attrs:{href:"https://uniapp.dcloud.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("uni-app"),e("OutboundLink")],1),t._v(" 开发，做到一套代码在微信公众号（h5）和支付宝小程序两端通用。")]),t._v(" "),e("p",[t._v("​\t"),e("a",{attrs:{href:"https://gitlab.haoyunqi.com.cn/wangzs/meiqiduo",target:"_blank",rel:"noopener noreferrer"}},[t._v("代码地址"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("商家端:")]),t._v(" "),e("p",[t._v("​\t企业商家端直接接入好运气系统，由好运气系统维护人员维护开发，本文档不做概述。")]),t._v(" "),e("p",[t._v("平台端：")]),t._v(" "),e("p",[t._v("​\t美气多平台端，用来处理美气多项目平台相关的配置管理，使用 "),e("RouterLink",{attrs:{to:"/template/vue-pc-template.html"}},[t._v("vue-pc-template")]),t._v(" 模板开发，详见对应文档。")],1),t._v(" "),e("p",[t._v("​\t"),e("a",{attrs:{href:"https://gitlab.haoyunqi.com.cn/wangzs/caesar-shop-front",target:"_blank",rel:"noopener noreferrer"}},[t._v("代码地址"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),e("p",[t._v("​\t商家端由后端人员维护，平台端文档直接参考vue-pc-template，本文档主要是介绍用户端")])]),t._v(" "),e("h3",{attrs:{id:"技术栈"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#技术栈"}},[t._v("#")]),t._v(" 技术栈")]),t._v(" "),e("p",[t._v("​\t本项目技术栈基于 ES2015+、uni-app、vue 、vuex 、uni-ui，提前了解和学习这些知识会对使用本项目有很大的帮助。")]),t._v(" "),e("h2",{attrs:{id:"快速开始"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#快速开始"}},[t._v("#")]),t._v(" 快速开始")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),e("p",[t._v("​\t本项目采用uni-app脚手架模式开发，通过vue-cli创建uni-app项目，摆脱了一定要用HBuilderX编辑器打包编译的问题，开发体验与正常基于webpack开发的项目一致，方便自动化集成。"),e("a",{attrs:{href:"https://uniapp.dcloud.io/quickstart-cli",target:"_blank",rel:"noopener noreferrer"}},[t._v("详见uni-app文档"),e("OutboundLink")],1)])]),t._v(" "),e("h3",{attrs:{id:"克隆项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#克隆项目"}},[t._v("#")]),t._v(" 克隆项目")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone http://gitlab.haoyunqi.com.cn/wangzs/meiqiduo.git\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"安装依赖"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[t._v("#")]),t._v(" 安装依赖")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"运行发布"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行发布"}},[t._v("#")]),t._v(" 运行发布")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# h5端启动开发服务")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run dev:h5\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# h5端打包编译项目")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run build:h5\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 支付宝小程序端启动开发环境")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run dev:mp-alipay\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 支付宝小程序端启动生产环境")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run build:mp-alipay\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br")])]),e("p",[t._v("更多运行发布命令，详见 "),e("a",{attrs:{href:"https://uniapp.dcloud.io/quickstart-cli?id=%e8%bf%90%e8%a1%8c%e3%80%81%e5%8f%91%e5%b8%83uni-app",target:"_blank",rel:"noopener noreferrer"}},[t._v("uni-app官网"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"开发调试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开发调试"}},[t._v("#")]),t._v(" 开发调试")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("​\t由于是一套代码，打包成多端运行，可以在先在其中一端进行开发调试，开发完成后再在其他端，调试是否存在异常需要处理。")]),t._v(" "),e("p",[t._v("​\teg: 先在h5端完成开发调试，通过后再打开支付宝开发工具调试支付宝端。")])]),t._v(" "),e("h4",{attrs:{id:"微信公众号端-h5端"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#微信公众号端-h5端"}},[t._v("#")]),t._v(" 微信公众号端（h5端）")]),t._v(" "),e("h5",{attrs:{id:"pc端调试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pc端调试"}},[t._v("#")]),t._v(" pc端调试")]),t._v(" "),e("p",[t._v("​\t项目是基于微信公众号的，所以开发调试工具必须是 "),e("a",{attrs:{href:"https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Web_Developer_Tools.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("微信开发者工具"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("开发流程参考：")]),t._v(" "),e("p",[t._v("​\t微信公众号开发流程")]),t._v(" "),e("p",[t._v("​\t"),e("a",{attrs:{href:"https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/JS-SDK.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("微信JS-SDK说明文档"),e("OutboundLink")],1)]),t._v(" "),e("h5",{attrs:{id:"真机调试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#真机调试"}},[t._v("#")]),t._v(" 真机调试")]),t._v(" "),e("p",[t._v("​\t移动端项目，在真机上即便是抓包依旧存在调试不便的情况。")]),t._v(" "),e("p",[t._v("​\t故在项目的404页面里添加了后门，用于引入 "),e("a",{attrs:{href:"https://github.com/Tencent/vConsole",target:"_blank",rel:"noopener noreferrer"}},[t._v("vConsole"),e("OutboundLink")],1),t._v(" 做为真机调试工具")]),t._v(" "),e("p",[t._v("具体操作流程：")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("在微信里输入本项目任意不存在的路由（前端路由即#号后为任意不存在路由），进入本项目的404页面")]),t._v(" "),e("p",[e("img",{staticStyle:{zoom:"25%"},attrs:{src:"https://gitee.com/Fuphoenixes/images/raw/master/images/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20210223161637.jpg",alt:"微信图片_20210223161637"}}),t._v(" "),e("img",{staticStyle:{zoom:"25%"},attrs:{src:"https://gitee.com/Fuphoenixes/images/raw/master/images/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20210223161645.jpg",alt:"微信图片_20210223161645"}})])]),t._v(" "),e("li",[e("p",[t._v("在 “404 Not Found”这段文字上，左右滑动超过2秒，即会打开后门，弹出设置调试器弹框，输入密码543210 点击确定，即可打开调试器")])])]),t._v(" "),e("p",[t._v("​       "),e("img",{staticStyle:{zoom:"25%"},attrs:{src:"https://gitee.com/Fuphoenixes/images/raw/master/images/微信图片_20210223155509.jpg"}}),t._v(" "),e("img",{staticStyle:{zoom:"25%"},attrs:{src:"https://gitee.com/Fuphoenixes/images/raw/master/images/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20210223155515.jpg",alt:"微信图片_20210223155515"}})]),t._v(" "),e("h4",{attrs:{id:"支付宝端"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#支付宝端"}},[t._v("#")]),t._v(" 支付宝端")]),t._v(" "),e("p",[t._v("​\t启动项目运行"),e("code",[t._v("npm run dev:mp-alipay")]),t._v("（或 "),e("code",[t._v("npm run build:mp-alipay")]),t._v("）后，使用 "),e("a",{attrs:{href:"https://opendocs.alipay.com/mini/ide",target:"_blank",rel:"noopener noreferrer"}},[t._v("支付宝小程序开发者工具"),e("OutboundLink")],1),t._v(" 打开项目下的 "),e("code",[t._v("dist/dev/mp-alipay")]),t._v(" （或 "),e("code",[t._v("dist/build/mp-alipay")]),t._v("）文件夹。后续开发调试与支付宝小程序官方开发调试模式一致，可 "),e("a",{attrs:{href:"https://opendocs.alipay.com/mini/ide/debug",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"功能点记录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#功能点记录"}},[t._v("#")]),t._v(" 功能点记录")]),t._v(" "),e("h3",{attrs:{id:"跨域代理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#跨域代理"}},[t._v("#")]),t._v(" 跨域代理")]),t._v(" "),e("p",[t._v("​\t在 "),e("code",[t._v("dev")]),t._v(" 开发模式下可以下使用 webpack 的 "),e("code",[t._v("proxy")]),t._v(" 使用也是很方便，参照 "),e("a",{attrs:{href:"https://www.webpackjs.com/configuration/dev-server/#devserver-proxy",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档 (opens new window)"),e("OutboundLink")],1),t._v("就会使用了，楼主一些个人项目使用的该方法。但这种方法在生产环境是不能使用的。在生产环境中需要使用 "),e("code",[t._v("nginx")]),t._v(" 进行反向代理。不管是 "),e("code",[t._v("proxy")]),t._v(" 和 "),e("code",[t._v("nginx")]),t._v(" 的原理都是一样的，通过搭建一个中转服务器来转发请求规避跨域的问题。")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("开发环境")]),t._v(" "),e("th",[t._v("生产环境")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("cors")]),t._v(" "),e("td",[t._v("cors")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("proxy")]),t._v(" "),e("td",[t._v("nginx")])])])]),t._v(" "),e("p",[t._v("示列")]),t._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// manifest.json")]),t._v("\n  devServer"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    proxy"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      '/proxy'"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        target"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 'http"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//xxxxxxxxxx',")]),t._v("\n        changeOrigin"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        pathRewrite"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          '^/proxy'"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ''\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br")])]),e("h3",{attrs:{id:"图标"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#图标"}},[t._v("#")]),t._v(" 图标")]),t._v(" "),e("p",[t._v("​\t由于要同时兼容多端，故本项目图标直接使用"),e("code",[t._v("image")]),t._v("标签引入下载好的图片。")]),t._v(" "),e("h3",{attrs:{id:"各端差异性处理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#各端差异性处理"}},[t._v("#")]),t._v(" 各端差异性处理")]),t._v(" "),e("p",[t._v("​\t参考 "),e("a",{attrs:{href:"https://uniapp.dcloud.io/platform",target:"_blank",rel:"noopener noreferrer"}},[t._v("uni-app 官方文档"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("​\t对于项目中由各端差异性导致无法一套代码完成同时适配多端的情况，建议针对各端分别封装好各自的逻辑，再引入页面。")]),t._v(" "),e("p",[t._v("​\t定位逻辑、支付逻辑：")]),t._v(" "),e("p",[t._v("​\t分别在 "),e("code",[t._v("src/utils/h5.js")]),t._v(" 和 "),e("code",[t._v("src/utils/mp.js")]),t._v(" 里封装了对应的逻辑，提供页面直接引入使用")]),t._v(" "),e("p",[t._v("​\tocr识别逻辑：")]),t._v(" "),e("p",[t._v("​\t在 "),e("code",[t._v("src/utils/ocr.js")]),t._v(" 里实现封装")]),t._v(" "),e("p",[t._v("​\t图片压缩逻辑：")]),t._v(" "),e("p",[t._v("​\t分别在 "),e("code",[t._v("src/utils/h5-compress.js")]),t._v(" 和 "),e("code",[t._v("src/utils/mp-compress.js")]),t._v("里实现封装")]),t._v(" "),e("h2",{attrs:{id:"辅助文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#辅助文档"}},[t._v("#")]),t._v(" 辅助文档")]),t._v(" "),e("p",[t._v("​\t"),e("a",{attrs:{href:"https://uniapp.dcloud.io/README",target:"_blank",rel:"noopener noreferrer"}},[t._v("uni-app文档"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("​\t"),e("a",{attrs:{href:"https://uniapp.dcloud.io/component/README?id=uniui",target:"_blank",rel:"noopener noreferrer"}},[t._v("uni-ui文档"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("​\t"),e("a",{attrs:{href:"https://cn.vuejs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue文档"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("​\t"),e("a",{attrs:{href:"https://vuex.vuejs.org/zh/",target:"_blank",rel:"noopener noreferrer"}},[t._v("vuex文档"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("​\t"),e("a",{attrs:{href:"https://opendocs.alipay.com/mini/developer",target:"_blank",rel:"noopener noreferrer"}},[t._v("支付宝小程序文档"),e("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);