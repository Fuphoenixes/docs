(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{367:function(s,t,a){"use strict";a.r(t);var n=a(42),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"一键订气"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一键订气"}},[s._v("#")]),s._v(" 一键订气")]),s._v(" "),a("h2",{attrs:{id:"介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[s._v("#")]),s._v(" 介绍")]),s._v(" "),a("h3",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),a("p",[s._v("​\t一键订气项目是基于微信公众号为燃气企业打造的一款线上订水订气的移动端H5平台。")]),s._v(" "),a("p",[s._v("​    "),a("a",{attrs:{href:"https://gitlab.haoyunqi.com.cn/dlh/cloud/weixin/cool.weixin.front",target:"_blank",rel:"noopener noreferrer"}},[s._v("代码地址"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#功能"}},[s._v("#")]),s._v(" 功能")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("- 下单订气\n- 微商城模块\n- 积分商城\n- 优惠券模块\n- 预付卡模块\n- 投诉保修模块\n- 抽奖营销模块\n- 秒杀模块\n- 安检单模块\n- 电子发票模块\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h3",{attrs:{id:"技术栈"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#技术栈"}},[s._v("#")]),s._v(" 技术栈")]),s._v(" "),a("p",[s._v("本项目技术栈基于 ES2015+、react、umi2.0、dva 、axios 、antdesign-mobile，提前了解和学习这些知识会对使用本项目有很大的帮助。")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("​\t除通用平台即master分支采用"),a("a",{attrs:{href:"https://v2.umijs.org/zh/",target:"_blank",rel:"noopener noreferrer"}},[s._v("umi2.0"),a("OutboundLink")],1),s._v("架构外，其他分支由于历史原因仍采用"),a("a",{attrs:{href:"https://github.com/umijs/umi/tree/1.x/docs",target:"_blank",rel:"noopener noreferrer"}},[s._v("umi1.0"),a("OutboundLink")],1),s._v("架构")]),s._v(" "),a("p",[s._v("​\t数据状态管理都是使用 "),a("a",{attrs:{href:"https://dvajs.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("dva"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("​\t！！！如不了解这两框架，请认真查阅相关文档")])]),s._v(" "),a("h3",{attrs:{id:"目录结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[s._v("#")]),s._v(" 目录结构")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("├── /mock/           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据mock")]),s._v("\n├── /dist/           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目输出目录")]),s._v("\n├── /src/            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目源码目录")]),s._v("\n│ ├── /assets/       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 公共文件，编译时copy至dist目录")]),s._v("\n│ ├── /components/   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# UI组件及UI相关方法")]),s._v("\n│ │ ├── skin.less    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全局样式")]),s._v("\n│ │ └── vars.less    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全局样式变量")]),s._v("\n│ ├── /pages/        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 页面")]),s._v("\n│ │ └── /user/       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 路由")]),s._v("\n│ │   ├── /components/ "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#私有组件     ")]),s._v("\n│ │   ├── /models/     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#私有模型(按需加载) ")]),s._v("\n│ │   ├── /services/   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#私有服务(按需加载)   ")]),s._v("\n│ │   ├── page.js       \n│ │   └── page.less   \n│ ├── /models/       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全局数据模型(默认加载)")]),s._v("\n│ ├── /services/     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据接口")]),s._v("\n│ ├── /themes/       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目样式")]),s._v("\n│ ├── /utils/        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 工具函数")]),s._v("\n│ │ ├── config.js    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目常规配置")]),s._v("\n│ │ ├── menu.js      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 菜单及面包屑配置")]),s._v("\n│ │ ├── branch.js    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目环境分支配置")]),s._v("\n│ │ ├── request.js   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 异步请求函数")]),s._v("\n│ │ └── theme.js     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目需要在js中使用到样式变量")]),s._v("\n│ ├── route.js       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 路由配置")]),s._v("\n│ ├── global.js      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 入口文件")]),s._v("\n│ ├── app.js         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dva配置")]),s._v("\n│ └── global.css"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(".less"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#全局样式文件     ")]),s._v("\n├── package.json     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目信息")]),s._v("\n├── .eslintrc        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Eslint配置")]),s._v("\n├── .umirc.js        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# umi配置")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br")])]),a("h3",{attrs:{id:"分支"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分支"}},[s._v("#")]),s._v(" 分支")]),s._v(" "),a("p",[s._v("​\t\t本项目由于会部署给多个企业使用，不同企业间存在不同的需求，故存在多个分支对应不同的需求。")]),s._v(" "),a("p",[s._v("​\t\t同时由于本项目涉及到微信支付，而微信支付的配置要求一个账户最多只能配置5个地址域名（ps: 后面找到了方法解决，但是写本项目那时还没有），故多个分支最后都部署在了一个链接地址上了，前端通过链接query参数上的不同企业公众号的appid来判断当前需要的分支版本，手动打上cookie，并刷新页面交由后端根据不同的cookie返回不同分支的前端资源代码。")]),s._v(" "),a("p",[s._v("​\t\t"),a("a",{attrs:{href:"https://gitlab.haoyunqi.com.cn/dlh/cloud/weixin/cool.weixin.front/blob/master/src/utils/branch.js",target:"_blank",rel:"noopener noreferrer"}},[s._v("前端实现代码地址"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("​\t\t"),a("a",{attrs:{href:"https://gitlab.haoyunqi.com.cn/dlh/cloud/weixin/cool.weixin.web/blob/master/src/main/java/com/dlh/weixin/controller/IndexPage.java#L55",target:"_blank",rel:"noopener noreferrer"}},[s._v("后端实现代码地址"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"环境分支对照表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境分支对照表"}},[s._v("#")]),s._v(" 环境分支对照表")]),s._v(" "),a("h4",{attrs:{id:"线上环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#线上环境"}},[s._v("#")]),s._v(" 线上环境")]),s._v(" "),a("p",[s._v("未知appid则默认是通用分支为master")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("企业")]),s._v(" "),a("th",[s._v("企业号")]),s._v(" "),a("th",[s._v("分支")]),s._v(" "),a("th",[s._v("appid")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("湖南中民")]),s._v(" "),a("td",[s._v("43007")]),s._v(" "),a("td",[s._v("43007")]),s._v(" "),a("td",[s._v("wxd36d46a12ead0f5d")])]),s._v(" "),a("tr",[a("td",[s._v("新疆昆仑")]),s._v(" "),a("td",[s._v("65011")]),s._v(" "),a("td",[s._v("65011")]),s._v(" "),a("td",[s._v("wxa316653c13627dd8")])]),s._v(" "),a("tr",[a("td",[s._v("东莞新华")]),s._v(" "),a("td",[s._v("44011")]),s._v(" "),a("td",[s._v("44011")]),s._v(" "),a("td",[s._v("wxf6c5a17f82beb5aa")])]),s._v(" "),a("tr",[a("td",[s._v("葫芦岛")]),s._v(" "),a("td",[s._v("21011")]),s._v(" "),a("td",[s._v("coupon")]),s._v(" "),a("td",[s._v("wx39fd076a3babf628")])])])]),s._v(" "),a("h4",{attrs:{id:"测试环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试环境"}},[s._v("#")]),s._v(" 测试环境")]),s._v(" "),a("p",[s._v("共3个公众号，测试时自行在master分支上(/src/utils/branch.js)做更改指向对应分支")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("公众号")]),s._v(" "),a("th",[s._v("appid")]),s._v(" "),a("th",[s._v("分支")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("好运气")]),s._v(" "),a("td",[s._v("wx03588315239b6dbf")]),s._v(" "),a("td",[s._v("master")])]),s._v(" "),a("tr",[a("td",[s._v("好运气-beta")]),s._v(" "),a("td",[s._v("wx5eec6abec3f367b5")]),s._v(" "),a("td",[s._v("44011")])]),s._v(" "),a("tr",[a("td",[s._v("好运气-beta2")]),s._v(" "),a("td",[s._v("wx80e59e88fdc78afa")]),s._v(" "),a("td",[s._v("43007")])])])]),s._v(" "),a("h2",{attrs:{id:"快速开始"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#快速开始"}},[s._v("#")]),s._v(" 快速开始")]),s._v(" "),a("h3",{attrs:{id:"克隆项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#克隆项目"}},[s._v("#")]),s._v(" 克隆项目")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone http://gitlab.haoyunqi.com.cn/dlh/cloud/weixin/cool.weixin.front.git\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"安装依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[s._v("#")]),s._v(" 安装依赖")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"启动服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动服务"}},[s._v("#")]),s._v(" 启动服务")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run dev\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"打包编译"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包编译"}},[s._v("#")]),s._v(" 打包编译")]),s._v(" "),a("p",[s._v("线上环境")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\t\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("测试环境")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build:test\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"开发调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发调试"}},[s._v("#")]),s._v(" 开发调试")]),s._v(" "),a("p",[s._v("由于本项目是基于微信公众号的，所以开发调试工具必须是 "),a("a",{attrs:{href:"https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Web_Developer_Tools.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("微信开发者工具"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("开发流程参考：")]),s._v(" "),a("p",[s._v("​\t微信公众号开发流程")]),s._v(" "),a("p",[s._v("​\t"),a("a",{attrs:{href:"https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/JS-SDK.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("微信JS-SDK说明文档"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"真机调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#真机调试"}},[s._v("#")]),s._v(" 真机调试")]),s._v(" "),a("p",[s._v("由于是移动端项目，在真机上即便是抓包依旧存在调试不便的情况")]),s._v(" "),a("p",[s._v("故在项目的404页面里添加了后门，用于引入"),a("a",{attrs:{href:"https://github.com/Tencent/vConsole",target:"_blank",rel:"noopener noreferrer"}},[s._v("vConsole"),a("OutboundLink")],1),s._v(" 做为真机调试工具")]),s._v(" "),a("p",[s._v("具体操作流程：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("在微信里输入本项目任意不存在的路由，进入本项目的404页面")]),s._v(" "),a("img",{staticStyle:{zoom:"25%"},attrs:{src:"https://gitee.com/Fuphoenixes/images/raw/master/images/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20210130002041.jpg",alt:"微信图片_20210130002041"}}),s._v(" "),a("img",{staticStyle:{zoom:"25%"},attrs:{src:"https://gitee.com/Fuphoenixes/images/raw/master/images/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20210130002047.jpg",alt:"微信图片_20210130002047"}})]),s._v(" "),a("li",[a("p",[s._v("在 “404 Not Found”这段文字上，左右滑动超过2秒，即会打开后门，弹出设置调试器弹框，输入密码 543210 点击确定，即可打开调试器")]),s._v(" "),a("img",{staticStyle:{zoom:"25%"},attrs:{src:"https://gitee.com/Fuphoenixes/images/raw/master/images/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20210130002026.jpg",alt:"微信图片_20210130002026"}})])]),s._v(" "),a("h2",{attrs:{id:"功能点记录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#功能点记录"}},[s._v("#")]),s._v(" 功能点记录")]),s._v(" "),a("h3",{attrs:{id:"移动端适配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#移动端适配"}},[s._v("#")]),s._v(" 移动端适配")]),s._v(" "),a("p",[s._v("移动端web页面的开发，由于手机"),a("strong",[s._v("屏幕尺寸")]),s._v("、"),a("strong",[s._v("分辨率")]),s._v("不同，或者需要考虑"),a("strong",[s._v("横竖屏")]),s._v("问题，为了使得web页面在不同移动设备上具有相适应的展示效果，需要在开发过程中使用合理的适配方案来解决这个问题。")]),s._v(" "),a("p",[s._v("目前主流的适配方案有： 百分比布局、rem布局、 vw/vh布局等等，个中的优势劣势可自行百度搜索，这里不做详细介绍。")]),s._v(" "),a("p",[s._v("本项目采用rem布局")]),s._v(" "),a("p",[s._v("原理：")]),s._v(" "),a("p",[a("strong",[s._v("rem")]),s._v("是相对长度单位，rem方案中的样式设计为相对于"),a("strong",[s._v("根元素")]),a("code",[s._v("font-size")]),s._v("计算值的倍数。根据 "),a("strong",[s._v("屏幕宽度")]),s._v(" 设置"),a("code",[s._v("html")]),s._v("标签的"),a("code",[s._v("font-size")]),s._v("，在布局时使用 "),a("strong",[s._v("rem")]),s._v(" 单位布局，达到自适应的目的，是 "),a("strong",[s._v("弹性布局")]),s._v(" 的一种实现方式。")]),s._v(" "),a("p",[s._v("实现：")]),s._v(" "),a("p",[s._v("​\t由于大部分的UI设计稿都是屏宽为750个单位，故我希望在设置css样式时能直接使用设计稿测量的数据，无需再换算，它最好类似这样 "),a("code",[s._v("width: 750 xx单位")]),s._v("， 那么现在开始设计：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("获取设置 html的font-size为屏宽 除以 7.5  "),a("a",{attrs:{href:"https://gitlab.haoyunqi.com.cn/dlh/cloud/weixin/cool.weixin.front/blob/master/src/pages/document.ejs#L18",target:"_blank",rel:"noopener noreferrer"}},[s._v("@/pages/document.ejs"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("pxToRem")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" html "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("documentElement"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" windowWidth "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("clientWidth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fontSize "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" windowWidth "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.5")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'px'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("pxToRem")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("设置less变量 @rem = 100")]),s._v(" "),a("div",{staticClass:"language-less line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-less"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//rem配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@rem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")])]),s._v("100rem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("假如测量UI稿宽度为750个单位，则如下设置")]),s._v(" "),a("div",{staticClass:"language-less line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-less"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v("width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 750"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@rem")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 等同于 width: 750/100rem => width: 7.5rem")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("思考:")]),s._v(" "),a("p",[a("code",[s._v("/@rem")]),s._v("这种写法好怪异，有没有其他办法，我就想直接写px可以吗？")]),s._v(" "),a("p",[s._v("答：有，我们可以借助webpack插件 "),a("a",{attrs:{href:"https://github.com/pigcan/postcss-plugin-px2rem",target:"_blank",rel:"noopener noreferrer"}},[s._v("postcss-plugin-px2rem"),a("OutboundLink")],1),s._v(" 将 除以100这种操作放到编译阶段，让webpack帮我们处理了")])])]),s._v(" "),a("li",[a("p",[s._v("引入postcss-plugin-px2rem 并配置  "),a("a",{attrs:{href:"https://gitlab.haoyunqi.com.cn/dlh/cloud/weixin/cool.weixin.front/blob/master/.umirc.js#L60",target:"_blank",rel:"noopener noreferrer"}},[s._v(".umirc.js"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" pxtorem "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'postcss-plugin-px2rem'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  extraPostCSSPlugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//高清方案 px转rem")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("pxtorem")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      rootValue"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      mediaQuery"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      exclude"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      selectorBlackList"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'iconfont'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      minPixelValue"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("移除第2步操作，修改第3步操作如下")]),s._v(" "),a("div",{staticClass:"language-less line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-less"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v("width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 750px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 编译时检测到px即会自动替换为计算好的rem值，如果就想要设置px可以设置为大写PX")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("​\t由于历史原因,除通用平台（master）分支采用了 postcss-plugin-px2rem这种方案，其他分支依旧使用的"),a("code",[s._v("@/rem")]),s._v(" 这种方案")])]),s._v(" "),a("h3",{attrs:{id:"路由动画"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路由动画"}},[s._v("#")]),s._v(" 路由动画")]),s._v(" "),a("p",[s._v("本项目实现了仿App的前进后退路由动画。（仅通用平台分支）")]),s._v(" "),a("p",[s._v("原理：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("先自定义一份路由表为每个路由设置对应层级标识 "),a("a",{attrs:{href:"https://gitlab.haoyunqi.com.cn/dlh/cloud/weixin/cool.weixin.front/blob/master/src/layouts/level.js",target:"_blank",rel:"noopener noreferrer"}},[s._v("@/layouts/level.js"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//路由等级， 用于判断路由动画是左滑还是右滑")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" routeLevel "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/gasExpress'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/submitOrder'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/coupon'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/city'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/orderList'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/orderDetail'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/evaluate'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/evaluate/detail'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/ggk'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/prize'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/prize/receive'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/404'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" routeLevel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("监听路由变化，根据路由地址获取路由的层级标识，判断当前路由和前一个路由的层级大小决定为当前页面添加左滑进入样式还是右滑进入样式 "),a("a",{attrs:{href:"https://gitlab.haoyunqi.com.cn/dlh/cloud/weixin/cool.weixin.front/blob/master/src/layouts/index.js#L76",target:"_blank",rel:"noopener noreferrer"}},[s._v("@/layouts/index.js"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//路由动效方向控制")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("changeRouteClassName")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("pathname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" oldPathname")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" level "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" routeLevel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("pathname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" oldLevel "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" routeLevel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("oldPathname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pathname "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/orderList'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("(s|S)ubmit")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-flags"}},[s._v("i")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("oldPathname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("slideType "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" level "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'undefined'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" oldLevel "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'undefined'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" level "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" oldLevel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("slideType "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("level "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" oldLevel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("slideType "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rightIn'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("level "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" oldLevel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("slideType "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'leftIn'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("编写对应的左滑样式和右滑样式的  "),a("a",{attrs:{href:"https://gitlab.haoyunqi.com.cn/dlh/cloud/weixin/cool.weixin.front/blob/master/src/layouts/style.js",target:"_blank",rel:"noopener noreferrer"}},[s._v("@/layouts/styles.js"),a("OutboundLink")],1)])])]),s._v(" "),a("h3",{attrs:{id:"图标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图标"}},[s._v("#")]),s._v(" 图标")]),s._v(" "),a("p",[s._v("​\t本项目使用字体图标方案来处理小图标，在 "),a("a",{attrs:{href:"http://iconfont.cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("iconfont.cn "),a("OutboundLink")],1),s._v("上选择并生成自己的业务图标库，再进行使用，")]),s._v(" "),a("p",[s._v("具体仓库地址可以联系对应管理员为你配置")]),s._v(" "),a("h3",{attrs:{id:"跨域问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#跨域问题"}},[s._v("#")]),s._v(" 跨域问题")]),s._v(" "),a("p",[s._v("在 "),a("code",[s._v("dev")]),s._v(" 开发模式下可以下使用 webpack 的 "),a("code",[s._v("proxy")]),s._v(" 使用也是很方便，参照 "),a("a",{attrs:{href:"https://www.webpackjs.com/configuration/dev-server/#devserver-proxy",target:"_blank",rel:"noopener noreferrer"}},[s._v("文档"),a("OutboundLink")],1),s._v(" 就会使用了，楼主一些个人项目使用的该方法。但这种方法在生产环境是不能使用的。在生产环境中需要使用 "),a("code",[s._v("nginx")]),s._v(" 进行反向代理。不管是 "),a("code",[s._v("proxy")]),s._v(" 和 "),a("code",[s._v("nginx")]),s._v(" 的原理都是一样的，通过搭建一个中转服务器来转发请求规避跨域的问题。")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[s._v("开发环境")]),s._v(" "),a("th",[s._v("生产环境")])])]),s._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("cors")]),s._v(" "),a("td",[s._v("cors")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("proxy")]),s._v(" "),a("td",[s._v("nginx")])])])]),s._v(" "),a("p",[s._v("proxy示列:")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// .umirc.js")]),s._v("\n   proxy"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/proxy'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        target"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://xxxxxxxxxx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        changeOrigin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        pathRewrite"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'^/proxy'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h3",{attrs:{id:"mock数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mock数据"}},[s._v("#")]),s._v(" mock数据")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://v2.umijs.org/zh/guide/mock-data.html#mock-%E6%95%B0%E6%8D%AE",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考umi文档"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"辅助资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#辅助资料"}},[s._v("#")]),s._v(" 辅助资料")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://v2.umijs.org/zh/",target:"_blank",rel:"noopener noreferrer"}},[s._v("umi2.0"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/umijs/umi/tree/1.x/docs",target:"_blank",rel:"noopener noreferrer"}},[s._v("umi1.0"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://dvajs.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("dva"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"http://zentao.haoyun7.com.cn:89/zentao/doc-view-9.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("一键订气各公众号"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);